{"version":3,"sources":["../../src/pages/midtrans/midtrans.module.ts","../../src/pages/midtrans/midtrans.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAuC;AACO;AACN;AAYxC;IAAA;IAAkC,CAAC;IAAtB,kBAAkB;QAT9B,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,+DAAY,CAAC;YAC5B,OAAO,EAAE;gBACR,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;aACtC;YACD,eAAe,EAAE;gBAChB,+DAAY;aACZ;SACF,CAAC;OACW,kBAAkB,CAAI;IAAD,yBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACdS;AACM;AACc;AAC5D,gDAAgD;AAChD,yDAAyD;AACxB;AASjC;IAGE,sBAAmB,GAAkB,EAAU,IAAU;QAAtC,QAAG,GAAH,GAAG,CAAe;QAAU,SAAI,GAAJ,IAAI,CAAM;IAGzD,CAAC;IAED,oCAAa,GAAb,UAAc,GAAG;QACf,IAAI,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACzC,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;QACZ,CAAC,CAAC,YAAY,CAAC,iBAAiB,EAAE,gCAAgC,CAAC,CAAC;QACpE,0BAA0B;QAC1B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAmCG;IAEH,qCAAc,GAAd;QAAA,iBA0CC;QAxCC,IAAM,QAAQ,GAAG,yCAAyC,CAAC;QAC3D,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC5B,IAAM,IAAI,GAAG;YACX,qBAAqB,EAAE;gBACrB,UAAU,EAAE,kBAAkB;gBAC9B,cAAc,EAAE,KAAK;aACtB;SACF,CAAC;QACF,iEAAiE;QAC/D,IAAI,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAE,kBAAkB,EAAE,QAAQ,EAAE,kBAAkB,EAAE,eAAe,EAAE,QAAQ,GAAG,IAAI,EAAC,CAAC,CAAC;QAChI,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,yDAAG,CAAC,iBAAiB,GAAG,cAAc,EAAE,IAAI,EAAE,OAAO,CAAC;aAC3E,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACtB,SAAS,CAAC,cAAI;YACb;;;;;;;;;iBASK;YACL,KAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,EAAE,yBAAyB,CAAC,CAAC;YAC/E,KAAI,CAAC,GAAG,CAAC,gBAAgB,CAAE,UAAU,EAAE;gBACvC,IAAI,CAAC,GAAG,CAAC,aAAa,CAClB,EAAE,IAAI,EAAE,yBAAyB,EAAE,EACnC,UAAU,MAAM;oBACZ,KAAK,CAAE,MAAM,CAAE,CAAC,CAAE,CAAE,CAAC;gBACzB,CAAC,CACJ,CAAC;YACV,CAAC,CAAC,CAAC;YACK,sEAAsE;YAClE,gCAAgC;QACtC,CAAC,CAAC,CAAC;QACL;;aAEK;IAEP,CAAC;IA/FU,YAAY;QAJxB,wEAAS,CAAC;YACT,QAAQ,EAAE,eAAe;WACG;SAC7B,CAAC;qBAIyD;OAH9C,YAAY,CAkGxB;IAAD,CAAC;AAAA;SAlGY,YAAY,e","file":"21.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {MidtransPage} from './midtrans';\n\n\n@NgModule({\n  declarations: [MidtransPage],\n  imports: [\n  \tIonicPageModule.forChild(MidtransPage)\n  ],\n  entryComponents: [\n  \tMidtransPage\n  ]\n})\nexport class MidtransPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/midtrans/midtrans.module.ts","import {Component} from '@angular/core';\nimport {NavController, IonicPage} from 'ionic-angular';\nimport {Http, Headers, RequestOptions} from '@angular/http';\n//import { Base64 } from '@ionic-native/base64';\n//import { BrowserTab } from '@ionic-native/browser-tab';\nimport {ENV} from '@environment';\n\n\n\n@IonicPage({name: 'midtrans'})\n@Component({\n  selector: 'page-midtrans',\n  templateUrl: 'midtrans.html'\n})\nexport class MidtransPage {\n  private win: any;\n\n  constructor(public nav: NavController, private http: Http) {\n    \n    \n  }\n\n  loadExtScript(src) {\n    var s = document.createElement('script');\n    s.src = src;\n    s.setAttribute('data-client-key', 'SB-Mid-client-hlQHlcXoTUe2pgBB');\n    //s['data-client-key'] = ;\n    document.body.appendChild(s);\n  }\n\n  /*execSnapCont(snap_token) {\n    var self = this;\n    var callbackTimer = setInterval(function() {\n                var snapExecuted = false;\n                try{\n                    snap.pay(snap_token, \n                    {\n                        onSuccess: function(result){\n                            console.log(result);\n                            window.location = result.finish_redirect_url;\n                        },\n                        onPending: function(result){\n                            console.log(result);\n                            window.location = result.pdf_url;\n                        },\n                        onError: function(result){\n                            console.log(result);\n                            // window.location = result.finish_redirect_url;\n                            self.execSnapCont(snap_token);\n                        },\n                        onClose: function(){\n                            // window.history.back();\n                            console.log(result);\n                            self.execSnapCont(snap_token);\n                        }\n                    });\n                    snapExecuted = true; // if SNAP popup executed, change flag to stop the retry.\n                } catch (e){ \n                    console.log(e);\n                    console.log('Snap not ready yet... Retrying in 1000ms!');\n                }\n                if (snapExecuted) {\n                    clearInterval(callbackTimer);\n                }\n            }, 1000);\n  }*/\n\n  ionViewDidLoad() {\n\n    const filePath = 'SB-Mid-server-RvLnQ-6vW6kvvpOCgCpuu9RR:';\n    const auth = btoa(filePath);\n    const data = {\n      \"transaction_details\": {\n        \"order_id\": \"ORDER-1292040921\",\n        \"gross_amount\": 10000\n      }\n    };\n    //this.base64.encodeFile(filePath).then((base64File: string) => {\n      let headers = new Headers({'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Basic ' + auth});\n      let options = new RequestOptions({ headers: headers });   \n      return this.http.post(ENV.MIDTRANS_ENDPOINT + 'transactions', data, options)\n      .map(res => res.json())\n      .subscribe(data => {\n        /*browserTab.isAvailable()\n        .then(isAvailable => {\n          if (isAvailable) {\n            //browserTab.openUrl(data.redirect_url);\n            this.loadExtScript('https://app.sandbox.midtrans.com/snap/snap.js');\n            this.execSnapCont(data.token);\n          } else {\n            // open URL with InAppBrowser instead or SafariViewController\n          }\n        });*/\n        this.win = window.open(data.redirect_url, '_blank', 'EnableViewPortScale=yes');\n        this.win.addEventListener( \"loadstop\", function() {\n        this.win.executeScript(\n            { code: \"document.body.innerHTML\" },\n            function( values ) {\n                alert( values[ 0 ] );\n            }\n        );\n});\n        //this.loadExtScript('https://app.sandbox.midtrans.com/snap/snap.js');\n            //this.execSnapCont(data.token);\n      });\n    /*}, (err) => {\n      console.log(err);\n    });*/\n    \n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/midtrans/midtrans.ts"],"sourceRoot":""}