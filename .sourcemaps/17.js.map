{"version":3,"sources":["../../src/pages/order-details/order-details.module.ts","../../src/services/order-service.ts","../../src/pages/order-details/order-details.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAuC;AACO;AACG;AACS;AAc1D;IAAA;IAAsC,CAAC;IAA1B,sBAAsB;QAZlC,uEAAQ,CAAC;YACR,YAAY,EAAE,CAAC,wEAAgB,CAAC;YAChC,OAAO,EAAE;gBACR,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;aAC1C;YACD,eAAe,EAAE;gBAChB,wEAAgB;aAChB;YACD,SAAS,EAAE;gBACV,6EAAY;aACZ;SACF,CAAC;OACW,sBAAsB,CAAI;IAAD,6BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;ACjBM;AACmB;AAC7B;AAC/B,sCAAsC;AACtC,6CAA6C;AAC7C,wCAAwC;AACL;AAGnC;IAEE,sBAAoB,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;IAC9B,CAAC;IAED,6BAAM,GAAN,UAAO,aAAa,EAAE,KAAK;QACzB,IAAM,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAE,kBAAkB,EAAE,eAAe,EAAE,SAAS,GAAG,aAAa,EAAC,CAAC,CAAC;QAC9G,IAAM,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAEzD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yDAAG,CAAC,YAAY,GAAG,kIAAkI,GAAG,KAAK,EAAE,OAAO,CAAC;aAC3L,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACtB,SAAS,EAAE,CAAC;IACf,CAAC;IAED,+BAAQ,GAAR,UAAS,GAAG,EAAE,KAAK;QACjB,IAAM,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAE,kBAAkB,EAAC,CAAC,CAAC;QAClE,IAAM,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACzD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yDAAG,CAAC,YAAY,GAAG,WAAW,GAAG,GAAG,EAAE,OAAO,CAAC;aAClE,GAAG,CAAC,aAAG;YACN,IAAM,IAAI,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;YACxB,IAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,cAAI;gBAC9C,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,OAAO,CAAC;YACzC,CAAC,CAAC,CAAC;YACH,MAAM,CAAC;gBACL,KAAK,EAAE,yDAAG,CAAC,sBAAsB,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK;gBAClD,KAAK,EAAE,KAAK;aACb;QACH,CAAC,CAAC;aACD,SAAS,EAAE,CAAC;IACf,CAAC;IAED,oCAAa,GAAb,UAAc,IAAI,EAAE,OAAO;QACzB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yDAAG,CAAC,YAAY,GAAG,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC;aACvE,GAAG,CAAC,aAAG;YACN,IAAM,IAAI,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;YACxB,IAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,cAAc,CAAC;YAC9E,aAAa,CAAC,GAAG,CAAC,cAAI;gBACpB,IAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAM;oBAC/B,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC;gBAC1B,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACnC,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC1B,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAM;wBACxD,MAAM,CAAC,MAAM,CAAC,cAAc,KAAK,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBAC/D,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAC5C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;gBACvC,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC;YACd,CAAC,CAAC,CAAC;YACH,IAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,cAAI;gBAC9C,MAAM,CAAC,IAAI,CAAC,cAAc,KAAK,aAAa,CAAC;YAC/C,CAAC,CAAC;YACF,IAAI,CAAC,OAAO,CAAC,GAAG,yDAAG,CAAC,sBAAsB,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAC5D,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IAED,sCAAe,GAAf,UAAgB,aAAa,EAAE,EAAE;QAC/B,IAAM,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAC,cAAc,EAAE,kBAAkB,EAAE,eAAe,EAAE,SAAS,GAAG,aAAa,EAAC,CAAC,CAAC;QAC9G,IAAM,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAEzD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,yDAAG,CAAC,YAAY,GAAG,cAAc,GAAE,EAAE,EAAE,OAAO,CAAC;aACnE,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aAQtB,SAAS,EAAE,CAAC;IACf,CAAC;IAzEU,YAAY;QADxB,yEAAU,EAAE;yCAGe,2DAAI;OAFnB,YAAY,CA0ExB;IAAD,mBAAC;CAAA;AA1EwB;;;;;;;;;;;;;;;;;;;;;;;;ACTe;AACD;AACqC;AAClB;AACzB;AAQjC;IAOE,0BAAmB,GAAkB,EAAS,YAA0B,EAAS,OAAgB,EAAS,WAA8B,EAAS,SAAoB;QAAlJ,QAAG,GAAH,GAAG,CAAe;QAAS,iBAAY,GAAZ,YAAY,CAAc;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,gBAAW,GAAX,WAAW,CAAmB;QAAS,cAAS,GAAT,SAAS,CAAW;QACnK,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,CAAC,WAAW,GAAG,yDAAG,CAAC,eAAe,CAAC;IACzC,CAAC;IAED,0CAAe,GAAf;QAAA,iBAWC;QAVA,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,eAAK;YACnD,EAAE,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,UAAU,CAAC;oBACX,KAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACzB,CAAC,CAAC,CAAC;gBACJ,MAAM,CAAC,KAAK,CAAC;YACd,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,MAAM,CAAC,IAAI,CAAC;YACb,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,yCAAc,GAAd;QAAA,iBAaC;QAZC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,eAAK;YAC3C,EAAE,EAAC,KAAK,CAAC,CAAC,CAAC;gBACT,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;gBACzC,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACvB,KAAI,CAAC,YAAY,CAAC,eAAe,CAAC,KAAK,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,cAAI;oBAC9D,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAE;wBAC3B,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;wBACnB,KAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,GAAG,KAAI,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,CAAC;oBAC1H,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;YACL,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mCAAQ,GAAR;QACC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC;IA3CU,gBAAgB;QAJ5B,wEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;yBAQqK;OAP1J,gBAAgB,CA4C5B;IAAD,CAAC;AAAA;SA5CY,gBAAgB,gB","file":"17.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {OrderDetailsPage} from './order-details';\nimport {OrderService} from \"../../services/order-service\";\n\n@NgModule({\n  declarations: [OrderDetailsPage],\n  imports: [\n  \tIonicPageModule.forChild(OrderDetailsPage)\n  ],\n  entryComponents: [\n  \tOrderDetailsPage\n  ],\n  providers: [\n  \tOrderService\n  ]\n})\nexport class OrderDetailsPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-details/order-details.module.ts","import {Injectable} from \"@angular/core\";\nimport {Http, Headers, RequestOptions} from '@angular/http';\nimport 'rxjs/add/operator/map';\n//import 'rxjs/add/operator/mergeMap';\n//import {Observable} from 'rxjs/Observable';\n//import 'rxjs/add/observable/forkJoin';\nimport { ENV } from '@environment';\n\n@Injectable()\nexport class OrderService {\n\n  constructor(private http: Http) {\n  }\n\n  getAll(customerToken, email) {\n    const headers = new Headers({'Content-Type': 'application/json', 'Authorization': 'Bearer ' + customerToken});\n    const options = new RequestOptions({ headers: headers });   \n    \n    return this.http.get(ENV.API_ENDPOINT + 'orders/mine?searchCriteria[filter_groups][0][filters][0][field]=customer_id&searchCriteria[filter_groups][0][filters][0][value]=' + email, options)\n    .map(res => res.json())\n    .toPromise();\n  }\n\n  getThumb(sku, index) {\n    const headers = new Headers({'Content-Type': 'application/json'});\n    const options = new RequestOptions({ headers: headers });   \n    return this.http.get(ENV.API_ENDPOINT + 'products/' + sku, options)\n    .map(res => {\n      const data = res.json();\n      const image = data.custom_attributes.filter(item => {\n        return item.attribute_code === 'image';\n      });\n      return {\n        thumb: ENV.PRODUCT_IMAGE_ENDPOINT + image[0].value,\n        index: index\n      }\n    })\n    .toPromise();\n  }\n\n  cartOfProduct(cart, options) {\n    return this.http.get(ENV.API_ENDPOINT + 'products/' + cart.sku, options)\n    .map(res => {\n      const prod = res.json();\n      const customOptions = cart.product_option.extension_attributes.custom_options;\n      customOptions.map(item => {\n        const i = prod.options.map(option => {\n          return option.option_id;\n        }).indexOf(parseInt(item.option_id));\n        item.title = prod.options[i].title;\n        if(prod.options[i].values) {\n          const option_values = prod.options[i].values.filter(option => {\n            return option.option_type_id === parseInt(item.option_value);\n          });\n          item.value_title = option_values[0].title;\n        } else {\n          item.value_title = item.option_value;\n        }\n        return item;\n      });\n      const image = prod.custom_attributes.filter(attr => {\n        return attr.attribute_code === 'small_image';\n      })\n      cart['image'] = ENV.PRODUCT_IMAGE_ENDPOINT + image[0].value;\n      return cart;\n    });\n  }\n\n  getOrderDetails(customerToken, id) {\n    const headers = new Headers({'Content-Type': 'application/json', 'Authorization': 'Bearer ' + customerToken});\n    const options = new RequestOptions({ headers: headers });   \n    \n    return this.http.get(ENV.API_ENDPOINT + 'orders/mine/'+ id, options)\n    .map(res => res.json())\n    /*.mergeMap(order => {\n      return Observable.forkJoin(\n        order['items'].map((item: any) => {\n          return this.cartOfProduct(item, options);\n        })\n      )\n    }) */\n    .toPromise();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/order-service.ts","import {Component} from '@angular/core';\nimport {Storage} from '@ionic/storage';\nimport {NavController, LoadingController, NavParams, IonicPage} from 'ionic-angular';\nimport {OrderService} from \"../../services/order-service\";\nimport {ENV} from '@environment';\n\n\n@IonicPage({name: 'order-details'})\n@Component({\n  selector: 'page-order-details',\n  templateUrl: 'order-details.html'\n})\nexport class OrderDetailsPage {\n  // sample data\n  public orders: any;\n  private loading: any;\n  private orderId: any;\n  private currencySym: any;\n\n  constructor(public nav: NavController, public orderService: OrderService, public storage: Storage, public loadingCtrl: LoadingController, public navParams: NavParams) {\n    // set sample data\n    this.orderId = this.navParams.get('orderId');\n    this.currencySym = ENV.CURRENCY_SYMBOL; \n  }\n\n  ionViewCanEnter(): Promise<boolean> {\n  \treturn this.storage.get('customer_token').then(value => {\n  \t\tif(!value) {\n        setTimeout(()=>{    \n\t\t      this.nav.push('login');\n\t\t \t  });\n  \t\t\treturn false;\n  \t\t} else {\n  \t\t\treturn true;\n  \t\t}\n  \t});\n  }\n\n  ionViewDidLoad() {\n    this.storage.get('customer_token').then(token => {\n      if(token) {\n        this.loading = this.loadingCtrl.create();\n        this.loading.present();\n        this.orderService.getOrderDetails(token, this.orderId).then(data => {\n          this.loading.dismiss().then( () => {\n            this.orders = data;\n            this.orders['shipping_address'] = this.orders['extension_attributes']['shipping_assignments'][0]['shipping']['address'];\n          });\n        });\n      }\n    });\n  }\n\n  continue() {\n  \tthis.nav.setRoot('home');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-details/order-details.ts"],"sourceRoot":""}